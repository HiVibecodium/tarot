import{r as E}from"./vendor-react-CnWnGStI.js";const _=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,h=globalThis,S="10.28.0";function b(){return D(h),h}function D(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||S,t[S]=t[S]||{}}function w(e,t,n=h){const s=n.__SENTRY__=n.__SENTRY__||{},r=s[S]=s[S]||{};return r[e]||(r[e]=t())}const V="Sentry Logger ",x={};function O(e){if(!("console"in h))return e();const t=h.console,n={},s=Object.keys(x);s.forEach(r=>{const i=x[r];n[r]=t[r],t[r]=i});try{return e()}finally{s.forEach(r=>{t[r]=n[r]})}}function X(){L().enabled=!0}function J(){L().enabled=!1}function j(){return L().enabled}function z(...e){k("log",...e)}function Q(...e){k("warn",...e)}function Z(...e){k("error",...e)}function k(e,...t){_&&j()&&O(()=>{h.console[e](`${V}[${e}]:`,...t)})}function L(){return _?w("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const l={enable:X,disable:J,isEnabled:j,log:z,warn:Q,error:Z},F=Object.prototype.toString;function tt(e){switch(F.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return rt(e,Error)}}function et(e,t){return F.call(e)===`[object ${t}]`}function nt(e){return et(e,"Object")}function st(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function rt(e,t){try{return e instanceof t}catch{return!1}}function it(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{_&&l.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function ot(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function at(){const e=h;return e.crypto||e.msCrypto}let I;function ct(){return Math.random()*16}function m(e=at()){try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return I||(I="10000000100040008000"+1e11),I.replace(/[018]/g,t=>(t^(ct()&15)>>t/4).toString(16))}const G=1e3;function Y(){return Date.now()/G}function ut(){const{performance:e}=h;if(!(e!=null&&e.now)||!e.timeOrigin)return Y;const t=e.timeOrigin;return()=>(t+e.now())/G}let N;function pt(){return(N??(N=ut()))()}function lt(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||pt(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:m()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function K(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const s={...e};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=K(s[r],t[r],n-1));return s}function T(){return m()}const C="_sentrySpan";function A(e,t){t?it(e,C,t):delete e[C]}function P(e){return e[C]}const ht=100;class d{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:T(),sampleRand:Math.random()}}clone(){const t=new d;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,A(t,P(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&lt(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,s=n instanceof d?n.getScopeData():nt(n)?t:void 0,{tags:r,attributes:i,extra:o,user:a,contexts:p,level:c,fingerprint:u=[],propagationContext:f}=s||{};return this._tags={...this._tags,...r},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...p},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),f&&(this._propagationContext=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,A(this,void 0),this._attachments=[],this.setPropagationContext({traceId:T(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var i;const s=typeof n=="number"?n:ht;if(s<=0)return this;const r={timestamp:Y(),...t,message:t.message?ot(t.message,2048):t.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>s&&(this._breadcrumbs=this._breadcrumbs.slice(-s),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:P(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=K(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const s=(n==null?void 0:n.event_id)||m();if(!this._client)return _&&l.warn("No client configured on scope - will not capture exception!"),s;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...n,event_id:s},this),s}captureMessage(t,n,s){const r=(s==null?void 0:s.event_id)||m();if(!this._client)return _&&l.warn("No client configured on scope - will not capture message!"),r;const i=(s==null?void 0:s.syntheticException)??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...s,event_id:r},this),r}captureEvent(t,n){const s=(n==null?void 0:n.event_id)||m();return this._client?(this._client.captureEvent(t,{...n,event_id:s},this),s):(_&&l.warn("No client configured on scope - will not capture event!"),s)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function dt(){return w("defaultCurrentScope",()=>new d)}function ft(){return w("defaultIsolationScope",()=>new d)}class _t{constructor(t,n){let s;t?s=t:s=new d;let r;n?r=n:r=new d,this._stack=[{scope:s}],this._isolationScope=r}withScope(t){const n=this._pushScope();let s;try{s=t(n)}catch(r){throw this._popScope(),r}return st(s)?s.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),s)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function g(){const e=b(),t=D(e);return t.stack=t.stack||new _t(dt(),ft())}function gt(e){return g().withScope(e)}function St(e,t){const n=g();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function U(e){return g().withScope(()=>e(g().getIsolationScope()))}function mt(){return{withIsolationScope:U,withScope:gt,withSetScope:St,withSetIsolationScope:(e,t)=>U(t),getCurrentScope:()=>g().getScope(),getIsolationScope:()=>g().getIsolationScope()}}function $(e){const t=D(e);return t.acs?t.acs:mt()}function R(){const e=b();return $(e).getCurrentScope()}function yt(){const e=b();return $(e).getIsolationScope()}function H(...e){const t=b(),n=$(t);if(e.length===2){const[s,r]=e;return s?n.withSetScope(s,r):n.withScope(r)}return n.withScope(e[0])}function W(){return R().getClient()}const Et=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function bt(e){return e==="http"||e==="https"}function It(e,t=!1){const{host:n,path:s,pass:r,port:i,projectId:o,protocol:a,publicKey:p}=e;return`${a}://${p}${t&&r?`:${r}`:""}@${n}${i?`:${i}`:""}/${s&&`${s}/`}${o}`}function vt(e){const t=Et.exec(e);if(!t){O(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,s,r="",i="",o="",a=""]=t.slice(1);let p="",c=a;const u=c.split("/");if(u.length>1&&(p=u.slice(0,-1).join("/"),c=u.pop()),c){const f=c.match(/^\d+/);f&&(c=f[0])}return q({host:i,pass:r,path:p,projectId:c,port:o,protocol:n,publicKey:s})}function q(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ct(e){if(!_)return!0;const{port:t,projectId:n,protocol:s}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(l.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?bt(s)?t&&isNaN(parseInt(t,10))?(l.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(l.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),!1):(l.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Dt(e){const t=typeof e=="string"?vt(e):q(e);if(!(!t||!Ct(t)))return t}function wt(e){if(e)return kt(e)?{captureContext:e}:$t(e)?{captureContext:e}:e}function kt(e){return e instanceof d||typeof e=="function"}const Lt=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function $t(e){return Object.keys(e).some(t=>Lt.includes(t))}function Rt(e,t){return R().captureException(e,wt(t))}function xt(){return yt().lastEventId()}function Nt(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Tt(e,t){const n=Dt(e);if(!n)return"";const s=`${Nt(n)}embed/error-page/`;let r=`dsn=${It(n)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=t.user;if(!o)continue;o.name&&(r+=`&name=${encodeURIComponent(o.name)}`),o.email&&(r+=`&email=${encodeURIComponent(o.email)}`)}else r+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${s}?${r}`}const y=h,B=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function M(e={}){const t=y.document,n=(t==null?void 0:t.head)||(t==null?void 0:t.body);if(!n){B&&l.error("[showReportDialog] Global document not defined");return}const s=R(),r=W(),i=r==null?void 0:r.getDsn();if(!i){B&&l.error("[showReportDialog] DSN not configured");return}const o={...e,user:{...s.getUser(),...e.user},eventId:e.eventId||xt()},a=y.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=Tt(i,o);const{onLoad:p,onClose:c}=o;if(p&&(a.onload=p),c){const u=f=>{if(f.data==="__sentry_reportdialog_closed__")try{c()}finally{y.removeEventListener("message",u)}};y.addEventListener("message",u)}n.appendChild(a)}function At(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}function Pt(e,t){const n=new WeakSet;function s(r,i){if(!n.has(r)){if(r.cause)return n.add(r),s(r.cause,i);r.cause=i}}s(e,t)}function Ut(e,{componentStack:t},n){if(At(E.version)&&tt(e)&&t){const s=new Error(e.message);s.name=`React ErrorBoundary ${e.name}`,s.stack=t,Pt(e,s)}return H(s=>(s.setContext("react",{componentStack:t}),Rt(e,n)))}const Bt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,v={componentStack:null,error:null,eventId:null};class Ot extends E.Component{constructor(t){super(t),this.state=v,this._openFallbackReportDialog=!0;const n=W();n&&t.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=n.on("afterSendEvent",s=>{!s.type&&this._lastEventId&&s.event_id===this._lastEventId&&M({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,n){const{componentStack:s}=n,{beforeCapture:r,onError:i,showDialog:o,dialogOptions:a}=this.props;H(p=>{r&&r(p,t,s);const c=this.props.handled!=null?this.props.handled:!!this.props.fallback,u=Ut(t,n,{mechanism:{handled:c,type:"auto.function.react.error_boundary"}});i&&i(t,s,u),o&&(this._lastEventId=u,this._openFallbackReportDialog&&M({...a,eventId:u})),this.setState({error:t,componentStack:s,eventId:u})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:s}=this.state,{onUnmount:r}=this.props;r&&(this.state===v?r(null,null,null):r(t,n,s)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:t}=this.props,{error:n,componentStack:s,eventId:r}=this.state;t&&t(n,s,r),this.setState(v)}render(){const{fallback:t,children:n}=this.props,s=this.state;if(s.componentStack===null)return typeof n=="function"?n():n;const r=typeof t=="function"?E.createElement(t,{error:s.error,componentStack:s.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:s.eventId}):t;return E.isValidElement(r)?r:(t&&Bt&&l.warn("fallback did not produce a valid ReactElement"),null)}}export{Ot as E};
