import{j as p}from"./index--0xx9eWN.js";import{r as g}from"./vendor-react-CnWnGStI.js";async function x(e){const n=document.createElement("canvas"),t=n.getContext("2d");n.width=1200,n.height=630;const o=t.createLinearGradient(0,0,n.width,n.height);o.addColorStop(0,"#667eea"),o.addColorStop(1,"#764ba2"),t.fillStyle=o,t.fillRect(0,0,n.width,n.height),t.fillStyle="rgba(0, 0, 0, 0.3)",t.fillRect(0,0,n.width,n.height),t.fillStyle="white",t.font="bold 48px Arial, sans-serif",t.textAlign="center",t.fillText("üîÆ –ú–æ–π –†–∞—Å–∫–ª–∞–¥ –¢–∞—Ä–æ",n.width/2,80),t.font="32px Arial, sans-serif",t.fillStyle="rgba(255, 255, 255, 0.9)";const r=C(e.readingType);if(t.fillText(r,n.width/2,130),e.question){t.font="24px Arial, sans-serif",t.fillStyle="rgba(255, 255, 255, 0.8)";const i=n.width-100;T(t,`"${e.question}"`,n.width/2,180,i,35)}const s=e.question?280:200,c=Math.min(e.cards.length,5),l=150,d=250,h=20,m=l*c+h*(c-1),w=(n.width-m)/2;for(let i=0;i<c;i++){const a=e.cards[i],f=w+i*(l+h);t.fillStyle="rgba(255, 255, 255, 0.95)",t.shadowColor="rgba(0, 0, 0, 0.3)",t.shadowBlur=15,t.shadowOffsetX=0,t.shadowOffsetY=5,y(t,f,s,l,d,10),t.fill(),t.shadowBlur=0,t.fillStyle="#333",t.font="bold 16px Arial, sans-serif",t.textAlign="center";const b=a.name||a.cardName;T(t,b,f+l/2,s+20,l-20,22),a.positionName&&(t.font="14px Arial, sans-serif",t.fillStyle="#666",t.fillText(a.positionName,f+l/2,s+d-15))}return t.textAlign="center",t.font="bold 20px Arial, sans-serif",t.fillStyle="white",t.fillText("–¢–∞—Ä–æ –ü–æ–º–æ—â–Ω–∏–∫ –†–µ—à–µ–Ω–∏–π",n.width/2,n.height-60),t.font="16px Arial, sans-serif",t.fillStyle="rgba(255, 255, 255, 0.8)",t.fillText("tarot-assistant.com",n.width/2,n.height-30),new Promise(i=>{n.toBlob(a=>{i(a)},"image/png",.95)})}function y(e,n,t,o,r,s){e.beginPath(),e.moveTo(n+s,t),e.lineTo(n+o-s,t),e.quadraticCurveTo(n+o,t,n+o,t+s),e.lineTo(n+o,t+r-s),e.quadraticCurveTo(n+o,t+r,n+o-s,t+r),e.lineTo(n+s,t+r),e.quadraticCurveTo(n,t+r,n,t+r-s),e.lineTo(n,t+s),e.quadraticCurveTo(n,t,n+s,t),e.closePath()}function T(e,n,t,o,r,s){const c=n.split(" ");let l="",d=o;for(let h=0;h<c.length;h++){const m=l+c[h]+" ";e.measureText(m).width>r&&h>0?(e.fillText(l,t,d),l=c[h]+" ",d+=s):l=m}e.fillText(l,t,d)}function C(e){return{daily:"–ö–∞—Ä—Ç–∞ –î–Ω—è",decision:"–†–∞—Å–∫–ª–∞–¥ –Ω–∞ –†–µ—à–µ–Ω–∏–µ","celtic-cross":"–ö–µ–ª—å—Ç—Å–∫–∏–π –ö—Ä–µ—Å—Ç",relationship:"–†–∞—Å–∫–ª–∞–¥ –û—Ç–Ω–æ—à–µ–Ω–∏–π","career-path":"–ö–∞—Ä—å–µ—Ä–Ω—ã–π –ü—É—Ç—å","year-ahead":"–ü—É—Ç—å –ì–æ–¥–∞","past-present-future":"–ü—Ä–æ—à–ª–æ–µ-–ù–∞—Å—Ç–æ—è—â–µ–µ-–ë—É–¥—É—â–µ–µ"}[e]||"–†–∞—Å–∫–ª–∞–¥ –¢–∞—Ä–æ"}async function S(e){const n=await x(e),t=URL.createObjectURL(n),o=document.createElement("a");o.href=t,o.download=`tarot-reading-${Date.now()}.png`,o.click(),URL.revokeObjectURL(t)}async function R(e){const n=await x(e),t=new File([n],"tarot-reading.png",{type:"image/png"});if(navigator.share&&navigator.canShare({files:[t]}))try{return await navigator.share({title:"–ú–æ–π —Ä–∞—Å–∫–ª–∞–¥ –¢–∞—Ä–æ",text:v(e),files:[t]}),!0}catch(o){return o.name!=="AbortError"&&console.error("Share failed:",o),!1}else return await S(e),!0}function v(e){if(!e)return"";let n=`üîÆ –ú–æ–π —Ä–∞—Å–∫–ª–∞–¥ –¢–∞—Ä–æ

`;return e.question&&(n+=`–í–æ–ø—Ä–æ—Å: ${e.question}

`),n+="–ü–æ–ø—Ä–æ–±—É–π —Å–∞–º: tarot-assistant.com",n}function A({reading:e}){const[n,t]=g.useState(!1),[o,r]=g.useState(!1),s=()=>{var f,b;if(!e)return"";let a=`üîÆ –ú–æ–π —Ä–∞—Å–∫–ª–∞–¥ –¢–∞—Ä–æ:

`;if(e.type==="daily"){const u=e.cards[0];a+=`–ö–∞—Ä—Ç–∞ –¥–Ω—è: ${u.cardName||u.name}
`,a+=((f=e.interpretation)==null?void 0:f.text)||""}else e.type==="decision"&&(a+=`–í–æ–ø—Ä–æ—Å: ${(b=e.context)==null?void 0:b.question}

`,e.cards.forEach(u=>{a+=`${u.positionName}: ${u.cardName}
`}));return a+=`

üîÆ –ü–æ–ø—Ä–æ–±—É–π —Å–∞–º: https://tarot-assistant.com`,a},c=()=>window.location.origin,l=async()=>{try{const a=s();await navigator.clipboard.writeText(a),t(!0),setTimeout(()=>t(!1),2e3)}catch(a){console.error("Copy failed:",a)}},d=()=>{const a=c(),f=s();window.open(`https://vk.com/share.php?url=${encodeURIComponent(a)}&title=${encodeURIComponent(f)}`,"_blank","width=600,height=400")},h=()=>{const a=s();window.open(`https://t.me/share/url?url=${encodeURIComponent(c())}&text=${encodeURIComponent(a)}`,"_blank","width=600,height=400")},m=()=>{const a=s();window.open(`https://wa.me/?text=${encodeURIComponent(a)}`,"_blank","width=600,height=400")},w=async()=>{if(e){r(!0);try{await R(e)}catch(a){console.error("Share image failed:",a),alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è")}finally{r(!1)}}},i=async()=>{if(e){r(!0);try{await S(e)}catch(a){console.error("Download image failed:",a),alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è")}finally{r(!1)}}};return p.jsxs("div",{className:"share-buttons",children:[p.jsx("div",{className:"share-label",children:"–ü–æ–¥–µ–ª–∏—Ç—å—Å—è:"}),p.jsx("button",{onClick:w,className:"share-btn share-image",title:"–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–∞—Ä—Ç–∏–Ω–∫–æ–π",disabled:o,children:o?"‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ...":"üñºÔ∏è –ö–∞—Ä—Ç–∏–Ω–∫–∞"}),p.jsx("button",{onClick:l,className:"share-btn share-copy",title:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",children:n?"‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!":"üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å"}),p.jsx("button",{onClick:d,className:"share-btn share-vk",title:"–í–ö–æ–Ω—Ç–∞–∫—Ç–µ",children:"VK"}),p.jsx("button",{onClick:h,className:"share-btn share-telegram",title:"Telegram",children:"‚úàÔ∏è Telegram"}),p.jsx("button",{onClick:m,className:"share-btn share-whatsapp",title:"WhatsApp",children:"üí¨ WhatsApp"}),p.jsx("button",{onClick:i,className:"share-btn share-download",title:"–°–∫–∞—á–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É",disabled:o,children:"üíæ –°–∫–∞—á–∞—Ç—å"})]})}export{A as S};
