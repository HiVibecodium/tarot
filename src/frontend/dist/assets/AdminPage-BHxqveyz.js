import{j as s}from"./index-CVF7lLOD.js";import{u as v,r as t}from"./vendor-react-CnWnGStI.js";import{u as b}from"./vendor-redux-BaGAZ_-q.js";import{a as m}from"./vendor-axios-B9ygI19o.js";import{a as g,b as f}from"./LoadingSkeletons-CZdT3T9G.js";import{E as k}from"./ErrorDisplay-XrrhJckB.js";import"./vendor-sentry-YIXFnBwd.js";const h="/api";function C(){const{token:d}=b(e=>e.auth),i=v(),[a,x]=t.useState(null),[j,u]=t.useState([]),[N,c]=t.useState(!0),[l,n]=t.useState(null);t.useEffect(()=>{o()},[]);const o=async()=>{var e;try{c(!0),n(null);const r=await m.get(`${h}/admin/stats`,{headers:{Authorization:`Bearer ${d}`}});x(r.data.data.stats);const p=await m.get(`${h}/admin/users?limit=20`,{headers:{Authorization:`Bearer ${d}`}});u(p.data.data.users||[])}catch(r){console.error("Load admin data error:",r),((e=r.response)==null?void 0:e.status)===403?n("Ð£ Ð²Ð°Ñ Ð½ÐµÑ‚ Ð¿Ñ€Ð°Ð² Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°"):n("ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°")}finally{c(!1)}};return N?s.jsxs("div",{className:"admin-page",children:[s.jsxs("header",{className:"reading-header",children:[s.jsx("button",{onClick:()=>i("/dashboard"),className:"btn-back",children:"â† ÐÐ°Ð·Ð°Ð´"}),s.jsx("h1",{children:"ðŸ‘¨â€ðŸ’¼ ÐÐ´Ð¼Ð¸Ð½ ÐŸÐ°Ð½ÐµÐ»ÑŒ"})]}),s.jsxs("main",{className:"admin-content",children:[s.jsx(g,{lines:10}),s.jsx(f,{rows:5,cols:4})]})]}):l?s.jsxs("div",{className:"admin-page",children:[s.jsxs("header",{className:"reading-header",children:[s.jsx("button",{onClick:()=>i("/dashboard"),className:"btn-back",children:"â† ÐÐ°Ð·Ð°Ð´"}),s.jsx("h1",{children:"ðŸ‘¨â€ðŸ’¼ ÐÐ´Ð¼Ð¸Ð½ ÐŸÐ°Ð½ÐµÐ»ÑŒ"})]}),s.jsx("main",{className:"admin-content",children:s.jsx(k,{error:{response:{status:403,data:{error:{message:l}}}},onRetry:o,context:{page:"admin"}})})]}):s.jsxs("div",{className:"admin-page",children:[s.jsxs("header",{className:"reading-header",children:[s.jsx("button",{onClick:()=>i("/dashboard"),className:"btn-back",children:"â† ÐÐ°Ð·Ð°Ð´"}),s.jsx("h1",{children:"ðŸ‘¨â€ðŸ’¼ ÐÐ´Ð¼Ð¸Ð½ ÐŸÐ°Ð½ÐµÐ»ÑŒ"})]}),s.jsxs("main",{className:"admin-content",children:[a&&s.jsxs("div",{className:"admin-section",children:[s.jsx("h2",{children:"ðŸ“Š Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ð°Ñ Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°"}),s.jsxs("div",{className:"stats-overview",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:"ðŸ‘¥"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-number",children:a.users.total}),s.jsx("div",{className:"stat-label",children:"Ð’ÑÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹"}),s.jsxs("div",{className:"stat-detail",children:["ðŸ‘‘ Premium: ",a.users.premium]})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:"ðŸƒ"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-number",children:a.cards.total}),s.jsx("div",{className:"stat-label",children:"ÐšÐ°Ñ€Ñ‚ Ð² ÐºÐ¾Ð»Ð¾Ð´Ðµ"}),s.jsxs("div",{className:"stat-detail",children:["Major: ",a.cards.major," | Minor: ",a.cards.minor]})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",children:"ðŸ”®"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-number",children:a.readings.total}),s.jsx("div",{className:"stat-label",children:"Ð’ÑÐµÐ³Ð¾ Ñ€Ð°ÑÐºÐ»Ð°Ð´Ð¾Ð²"}),s.jsxs("div",{className:"stat-detail",children:["Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ: ",a.readings.today]})]})]})]})]}),s.jsxs("div",{className:"admin-section",children:[s.jsx("h2",{children:"ðŸ‘¥ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ (Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 20)"}),s.jsx("div",{className:"users-table-wrapper",children:s.jsxs("table",{className:"users-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Ð˜Ð¼Ñ"}),s.jsx("th",{children:"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ°"}),s.jsx("th",{children:"Ð Ð°ÑÐºÐ»Ð°Ð´Ñ‹"}),s.jsx("th",{children:"Ð¡ÐµÑ€Ð¸Ñ"}),s.jsx("th",{children:"Ð”Ð°Ñ‚Ð° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸"})]})}),s.jsx("tbody",{children:j.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.email}),s.jsx("td",{children:e.displayName||"-"}),s.jsx("td",{children:s.jsx("span",{className:`tier-badge ${e.subscriptionTier}`,children:e.subscriptionTier==="premium"?"ðŸ‘‘ Premium":"Free"})}),s.jsx("td",{children:e.totalReadings}),s.jsxs("td",{children:[e.currentStreak," Ð´Ð½."]}),s.jsx("td",{children:new Date(e.createdAt).toLocaleDateString("ru-RU")})]},e.id))})]})})]})]})]})}export{C as default};
