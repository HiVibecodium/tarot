import{j as e,a as E}from"./index-BDYgH7OC.js";import{u as I,r as t}from"./vendor-react-CnWnGStI.js";import{u as q}from"./vendor-redux-CmCFQHRP.js";import{a as j}from"./vendor-axios-B9ygI19o.js";import{S as L}from"./SpreadEngine-C-1c3MqR.js";import"./vendor-sentry-YIXFnBwd.js";import"./vendor-stripe-e-37tJ21.js";const v="/api";function D(){const k=I(),{token:N}=q(a=>a.auth),[h,w]=t.useState(null),[S,$]=t.useState(!0),[i,g]=t.useState(""),[o,y]=t.useState(""),[c,x]=t.useState(null),[u,f]=t.useState(!1);t.useEffect(()=>{b()},[]);const b=async()=>{try{const a=await j.get(`${v}/spreads/career-path`);w(a.data.data)}catch(a){console.error("Failed to load spread:",a)}finally{$(!1)}},C=async a=>{f(!0);try{const n=(await j.post(`${v}/spreads/career-path/interpret`,{cards:a.map(s=>({name:s.name,cardId:s.cardId,reversed:s.reversed})),question:i,context:{careerGoal:o}},{headers:{Authorization:`Bearer ${N}`}})).data.data,r={summary:n.summary,positions:n.positions.map((s,l)=>{var d,p;return{positionName:s.positionName,card:s.card.name,reversed:s.card.reversed,keywords:((d=a[l])==null?void 0:d.keywords)||[],arcana:(p=a[l])==null?void 0:p.arcana,meaning:s.interpretation}})};x(r);try{await j.post(`${v}/spreads/career-path/save`,{cards:a,interpretation:r,question:i,context:{careerGoal:o}},{headers:{Authorization:`Bearer ${N}`}})}catch(s){console.error("Failed to save:",s)}}catch(m){console.error("Failed to get interpretation:",m);const n={summary:`Ğ’Ğ°Ñˆ ĞºĞ°Ñ€ÑŒĞµÑ€Ğ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· ${a.length} ĞºĞ°Ñ€Ñ‚. ${o?`Ğ¦ĞµĞ»ÑŒ: "${o}". `:""}${i?`Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ: "${i}". `:""}ĞšĞ°Ñ€Ñ‚Ñ‹ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ, Ğ²Ğ°ÑˆĞ¸ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹ Ğ¸ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ.`,positions:a.map((r,s)=>{var l,d,p;return{positionName:((l=h.positions[s])==null?void 0:l.name)||`ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ ${s+1}`,card:r.name,reversed:r.reversed,keywords:r.keywords,arcana:r.arcana,meaning:r.reversed?`ĞŸĞµÑ€ĞµĞ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ² ĞºĞ°Ñ€ÑŒĞµÑ€Ğµ: ${(d=r.keywords)==null?void 0:d.slice(0,2).join(", ")}. ĞĞ±Ñ€Ğ°Ñ‚Ğ¸Ñ‚Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° ÑÑ‚Ğ¸ Ğ°ÑĞ¿ĞµĞºÑ‚Ñ‹.`:`ĞŸÑ€ÑĞ¼Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚: ${(p=r.keywords)==null?void 0:p.slice(0,2).join(", ")}. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑÑ‚Ğ¸ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ.`}})};x(n)}finally{f(!1)}};return S?e.jsx("div",{className:"loading",children:"Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°..."}):e.jsxs("div",{className:"career-path-page",children:[e.jsx(E,{}),e.jsxs("header",{className:"reading-header",children:[e.jsx("button",{onClick:()=>k("/dashboard"),className:"btn-back",children:"â† ĞĞ°Ğ·Ğ°Ğ´"}),e.jsx("h1",{children:"ğŸ’¼ ĞšĞ°Ñ€ÑŒĞµÑ€Ğ½Ñ‹Ğ¹ ĞŸÑƒÑ‚ÑŒ"})]}),e.jsxs("main",{className:"career-content",children:[!c&&e.jsxs("div",{className:"question-section",children:[e.jsx("h3",{children:"Ğ Ğ’Ğ°ÑˆĞµĞ¹ ĞšĞ°Ñ€ÑŒĞµÑ€Ğµ"}),e.jsx("p",{className:"question-hint",children:"Ğ­Ñ‚Ğ¾Ñ‚ Ñ€Ğ°ÑĞºĞ»Ğ°Ğ´ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² ĞºĞ°Ñ€ÑŒĞµÑ€Ğµ, Ğ²Ğ°ÑˆĞ¸ Ñ‚Ğ°Ğ»Ğ°Ğ½Ñ‚Ñ‹, Ğ¿Ñ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸Ñ Ğ¸ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ Ñ€Ğ¾ÑÑ‚Ğ°."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ğ’Ğ°ÑˆĞ° ĞºĞ°Ñ€ÑŒĞµÑ€Ğ½Ğ°Ñ Ñ†ĞµĞ»ÑŒ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾):"}),e.jsx("input",{type:"text",value:o,onChange:a=>y(a.target.value),placeholder:"ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ğ¡Ñ‚Ğ°Ñ‚ÑŒ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ĞµĞ¼ Ğ¾Ñ‚Ğ´ĞµĞ»Ğ°",className:"career-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ğ’Ğ°Ñˆ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ Ğ¾ ĞºĞ°Ñ€ÑŒĞµÑ€Ğµ:"}),e.jsx("textarea",{value:i,onChange:a=>g(a.target.value),placeholder:"ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: ĞšĞ°Ğº Ğ¼Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚ÑŒÑÑ Ğ¿Ğ¾ ĞºĞ°Ñ€ÑŒĞµÑ€Ğ½Ğ¾Ğ¹ Ğ»ĞµÑÑ‚Ğ½Ğ¸Ñ†Ğµ?",className:"question-input",rows:3})]})]}),h&&!c&&!u&&e.jsx(L,{spread:h,onComplete:C}),u&&e.jsxs("div",{className:"interpretation-loading",children:[e.jsx("div",{className:"loading-spinner",children:"ğŸ’¼"}),e.jsx("p",{children:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· ĞºĞ°Ñ€ÑŒĞµÑ€Ğ½Ğ¾Ğ³Ğ¾ Ğ¿ÑƒÑ‚Ğ¸..."}),e.jsx("p",{className:"loading-hint",children:"ĞšĞ°Ñ€Ñ‚Ñ‹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ Ğ²Ğ°Ñˆ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ..."})]}),c&&!u&&e.jsxs("div",{className:"interpretation-results",children:[e.jsx("h2",{children:"ğŸŒŸ Ğ˜Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ†Ğ¸Ñ ĞšĞ°Ñ€ÑŒĞµÑ€Ğ½Ğ¾Ğ³Ğ¾ ĞŸÑƒÑ‚Ğ¸"}),e.jsxs("div",{className:"interpretation-summary",children:[e.jsx("h3",{children:"ĞĞ±Ñ‰Ğ°Ñ ĞšĞ°Ñ€Ñ‚Ğ¸Ğ½Ğ°:"}),e.jsx("p",{children:c.summary})]}),e.jsx("div",{className:"position-interpretations",children:c.positions.map((a,m)=>{var n;return e.jsxs("div",{className:"position-interpretation",children:[e.jsxs("div",{className:"position-header",children:[e.jsx("span",{className:"position-badge",children:a.positionName}),a.arcana==="major"&&e.jsx("span",{className:"arcana-badge",children:"Ğ¡Ñ‚Ğ°Ñ€ÑˆĞ¸Ğ¹ ĞÑ€ĞºĞ°Ğ½"})]}),e.jsxs("h4",{children:[a.card,a.reversed&&e.jsx("span",{className:"reversed-indicator",children:" âš¡ ĞŸĞµÑ€ĞµĞ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ğ°"})]}),e.jsx("div",{className:"card-keywords-display",children:(n=a.keywords)==null?void 0:n.map((r,s)=>e.jsx("span",{className:"keyword-tag",children:r},s))}),e.jsx("p",{children:a.meaning})]},m)})}),e.jsxs("div",{className:"career-advice",children:[e.jsx("h3",{children:"ğŸ’¡ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸:"}),e.jsx("p",{children:"ĞšĞ°Ñ€ÑŒĞµÑ€Ğ° - ÑÑ‚Ğ¾ Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ğµ, Ğ° Ğ½Ğµ Ğ¿ÑƒĞ½ĞºÑ‚ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞ²Ğ¾Ğ¸ Ñ‚Ğ°Ğ»Ğ°Ğ½Ñ‚Ñ‹, Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ°Ğ´ Ğ¿Ñ€ĞµĞ¿ÑÑ‚ÑÑ‚Ğ²Ğ¸ÑĞ¼Ğ¸ Ğ¸ Ğ±ÑƒĞ´ÑŒÑ‚Ğµ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑĞ¼. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑˆĞ°Ğ³ Ğ²Ğ°Ğ¶ĞµĞ½."})]}),e.jsx("button",{onClick:()=>{x(null),g(""),y("")},className:"btn-primary",children:"ğŸ”„ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ Ğ°ÑĞºĞ»Ğ°Ğ´"})]})]})]})}export{D as default};
