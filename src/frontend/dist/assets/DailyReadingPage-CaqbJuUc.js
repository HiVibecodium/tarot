import{j as e,a as A}from"./index-CVF7lLOD.js";import{r as c,u as F}from"./vendor-react-CnWnGStI.js";import{u as T}from"./vendor-redux-BaGAZ_-q.js";import{T as U}from"./TarotCard-BGtKE0RI.js";import{S as B}from"./ShareButtons-DN2S19NE.js";import{e as _}from"./SEO-B0xZvd-3.js";import{c as I}from"./LoadingSkeletons-CZdT3T9G.js";import{E as L}from"./ErrorDisplay-XrrhJckB.js";import"./vendor-axios-B9ygI19o.js";import"./vendor-sentry-YIXFnBwd.js";const P=[{id:"happy",emoji:"üòä",label:"–°—á–∞—Å—Ç–ª–∏–≤",color:"#FFD43B"},{id:"calm",emoji:"üòå",label:"–°–ø–æ–∫–æ–µ–Ω",color:"#51CF66"},{id:"anxious",emoji:"üò∞",label:"–¢—Ä–µ–≤–æ–∂–µ–Ω",color:"#FF6B6B"},{id:"sad",emoji:"üò¢",label:"–ì—Ä—É—Å—Ç–µ–Ω",color:"#748FFC"},{id:"excited",emoji:"ü§©",label:"–í–∑–≤–æ–ª–Ω–æ–≤–∞–Ω",color:"#FFD43B"},{id:"confused",emoji:"üòï",label:"–†–∞—Å—Ç–µ—Ä—è–Ω",color:"#E599F7"},{id:"neutral",emoji:"üòê",label:"–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ",color:"#ADB5BD"}],M=[{value:1,label:"–û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è",emoji:"ü™´"},{value:2,label:"–ù–∏–∑–∫–∞—è",emoji:"üîã"},{value:3,label:"–°—Ä–µ–¥–Ω—è—è",emoji:"‚ö°"},{value:4,label:"–í—ã—Å–æ–∫–∞—è",emoji:"‚ú®"},{value:5,label:"–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è",emoji:"üî•"}],O=["—Ä–∞–±–æ—Ç–∞","–æ—Ç–Ω–æ—à–µ–Ω–∏—è","–¥–µ–Ω—å–≥–∏","–∑–¥–æ—Ä–æ–≤—å–µ","—Å–µ–º—å—è","–∫–∞—Ä—å–µ—Ä–∞","—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ","—É—á—ë–±–∞"];function $({value:x,onChange:n,label:l="–ö–∞–∫ –≤—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—Ç–µ?",showEnergy:t=!1,showTags:s=!1,showNotes:j=!1,onFullSubmit:m=null}){var v,b;const[i,N]=c.useState(x||""),[h,w]=c.useState(3),[r,u]=c.useState([]),[g,C]=c.useState(""),[y,f]=c.useState(!1),k=a=>{N(a),n&&!t&&!s&&!j&&n(a)},E=a=>{r.includes(a)?u(r.filter(o=>o!==a)):u([...r,a])},S=()=>{if(!i){alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ");return}m?m({mood:i,energy:t?h:void 0,tags:s?r:void 0,notes:j?g:void 0}):n&&n(i)};return P.find(a=>a.id===i),e.jsxs("div",{className:"mood-selector",children:[e.jsx("label",{className:"mood-label",children:l}),e.jsx("div",{className:"mood-grid",children:P.map(a=>e.jsxs("button",{type:"button",className:`mood-btn ${i===a.id?"selected":""}`,style:{borderColor:i===a.id?a.color:"#ddd",backgroundColor:i===a.id?`${a.color}20`:"white"},onClick:()=>k(a.id),title:a.label,children:[e.jsx("span",{className:"mood-emoji",children:a.emoji}),e.jsx("span",{className:"mood-text",children:a.label})]},a.id))}),t&&i&&e.jsxs("div",{className:"energy-selector",children:[e.jsxs("label",{className:"energy-label",children:["‚ö° –£—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏: ",(v=M[h-1])==null?void 0:v.emoji," ",(b=M[h-1])==null?void 0:b.label]}),e.jsx("input",{type:"range",min:"1",max:"5",value:h,onChange:a=>w(parseInt(a.target.value)),className:"energy-slider"}),e.jsxs("div",{className:"energy-scale",children:[e.jsx("span",{children:"ü™´"}),e.jsx("span",{children:"üîã"}),e.jsx("span",{children:"‚ö°"}),e.jsx("span",{children:"‚ú®"}),e.jsx("span",{children:"üî•"})]})]}),(s||j)&&i&&e.jsxs("button",{className:"toggle-advanced",onClick:()=>f(!y),type:"button",children:[y?"‚ñº":"‚ñ∂"," –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (—Ç–µ–≥–∏ –∏ –∑–∞–º–µ—Ç–∫–∏)"]}),s&&y&&e.jsxs("div",{className:"mood-tags",children:[e.jsx("label",{className:"tags-label",children:"üè∑Ô∏è –¢–µ–≥–∏:"}),e.jsx("div",{className:"tag-options",children:O.map(a=>e.jsx("button",{type:"button",className:`tag-option ${r.includes(a)?"selected":""}`,onClick:()=>E(a),children:a},a))})]}),j&&y&&e.jsxs("div",{className:"mood-notes",children:[e.jsx("label",{className:"notes-label",children:"üìù –ó–∞–º–µ—Ç–∫–∏:"}),e.jsx("textarea",{className:"notes-textarea",value:g,onChange:a=>C(a.target.value),placeholder:"–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –≤–∞—à–µ–π –∂–∏–∑–Ω–∏ —Å–µ–π—á–∞—Å?",rows:"3"})]}),m&&i&&e.jsx("button",{className:"mood-submit",onClick:S,type:"button",children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"})]})}function z({text:x}){const[n,l]=c.useState(!1),[t,s]=c.useState(!1),[j,m]=c.useState(null),i=()=>{if(!x)return;if(t&&j){window.speechSynthesis.resume(),s(!1),l(!0);return}const r=new SpeechSynthesisUtterance(x);r.lang="ru-RU",r.rate=.9,r.pitch=1,r.onend=()=>{l(!1),s(!1)},m(r),window.speechSynthesis.speak(r),l(!0),s(!1)},N=()=>{window.speechSynthesis.pause(),s(!0),l(!1)},h=()=>{window.speechSynthesis.cancel(),l(!1),s(!1)};return"speechSynthesis"in window?e.jsxs("div",{className:"voice-reader",children:[e.jsxs("div",{className:"voice-controls",children:[!n&&!t&&e.jsx("button",{onClick:i,className:"voice-btn voice-play",title:"–ü—Ä–æ—Å–ª—É—à–∞—Ç—å",children:"üîä –ü—Ä–æ—Å–ª—É—à–∞—Ç—å"}),n&&e.jsx("button",{onClick:N,className:"voice-btn voice-pause",title:"–ü–∞—É–∑–∞",children:"‚è∏ –ü–∞—É–∑–∞"}),t&&e.jsx("button",{onClick:i,className:"voice-btn voice-resume",title:"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",children:"‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"}),(n||t)&&e.jsx("button",{onClick:h,className:"voice-btn voice-stop",title:"–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å",children:"‚èπ –°—Ç–æ–ø"})]}),n&&e.jsxs("div",{className:"voice-indicator",children:[e.jsx("div",{className:"wave"}),e.jsx("div",{className:"wave"}),e.jsx("div",{className:"wave"})]})]}):null}const G=x=>({happy:"üòä –°—á–∞—Å—Ç–ª–∏–≤",calm:"üòå –°–ø–æ–∫–æ–µ–Ω",anxious:"üò∞ –¢—Ä–µ–≤–æ–∂–µ–Ω",sad:"üò¢ –ì—Ä—É—Å—Ç–µ–Ω",excited:"ü§© –í–∑–≤–æ–ª–Ω–æ–≤–∞–Ω",confused:"üòï –†–∞—Å—Ç–µ—Ä—è–Ω",angry:"üò† –ó–æ–ª",hopeful:"üôè –ù–∞–¥–µ—é—Å—å"})[x]||x;function ee(){var b,a;const{token:x}=T(o=>o.auth),n=F(),[l,t]=c.useState(null),[s,j]=c.useState(null),[m,i]=c.useState(!1),[N,h]=c.useState(null),[w,r]=c.useState(!1),[u,g]=c.useState(""),[C,y]=c.useState(!1),[f,k]=c.useState(!1),[E,S]=c.useState(!1),v=async o=>{var p,D,R;k(!0),await new Promise(d=>setTimeout(d,2e3)),i(!0),h(null);try{const d=await A.post("/readings/daily",{mood:o||u});t(d.data.data.reading),r(d.data.data.isNew),d.data.data.horoscope&&j(d.data.data.horoscope),d.data.data.isNew||(y(!1),S(!1))}catch(d){console.error("Error generating reading:",d),h(((R=(D=(p=d.response)==null?void 0:p.data)==null?void 0:D.error)==null?void 0:R.message)||"Failed to generate reading")}finally{i(!1),k(!1)}};return c.useEffect(()=>{(async()=>{try{const p=await A.post("/readings/daily",{});p.data.data.isNew||(t(p.data.data.reading),r(!1))}catch{}})()},[]),e.jsxs("div",{className:"daily-reading-page",children:[e.jsx(_,{}),e.jsxs("header",{className:"reading-header",children:[e.jsx("button",{onClick:()=>n("/dashboard"),className:"btn-back",children:"‚Üê –ù–∞–∑–∞–¥"}),e.jsx("h1",{children:"üîÆ –†–∞—Å–∫–ª–∞–¥ –î–Ω—è"})]}),e.jsxs("main",{className:"reading-content",children:[!l&&!m&&!f&&!N&&e.jsx("div",{className:"draw-card-prompt",children:e.jsxs("div",{className:"prompt-content",children:[e.jsxs("div",{className:"tarot-deck-visual",children:[e.jsx("div",{className:"card-back",children:"üîÆ"}),e.jsx("div",{className:"card-back",children:"üîÆ"}),e.jsx("div",{className:"card-back",children:"üîÆ"})]}),e.jsx("h2",{children:"–†–∞—Å–∫–ª–∞–¥ –î–Ω—è"}),e.jsx("p",{children:"–°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ—ë–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏ - —ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞"}),!u&&e.jsx($,{value:u,onChange:o=>{g(o)},label:"–ö–∞–∫ –≤—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–≥–æ–¥–Ω—è?"}),u&&e.jsxs("div",{className:"mood-feedback",children:[e.jsxs("p",{children:["‚ú® –í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: ",G(u)]}),e.jsx("p",{children:"–≠—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é –∫–∞—Ä—Ç—ã!"}),e.jsxs("div",{className:"draw-options",children:[e.jsx("button",{onClick:()=>v(u),className:"btn-draw-card",children:"üîÆ –í—ã—Ç—è–Ω—É—Ç—å –ö–∞—Ä—Ç—É –î–Ω—è"}),e.jsx("button",{onClick:()=>n("/reading/past-present-future"),className:"btn-draw-card btn-secondary-draw",title:"–ü—Ä–æ—à–ª–æ–µ-–ù–∞—Å—Ç–æ—è—â–µ–µ-–ë—É–¥—É—â–µ–µ",children:"üé¥ 3 –ö–∞—Ä—Ç—ã (–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)"})]})]})]})}),f&&e.jsx("div",{className:"card-drawing-animation",children:e.jsxs("div",{className:"drawing-cards",children:[e.jsxs("div",{className:"card-stack",children:[e.jsx("div",{className:"card-back animate-draw",children:"üîÆ"}),e.jsx("div",{className:"card-back",children:"üîÆ"}),e.jsx("div",{className:"card-back",children:"üîÆ"})]}),e.jsx("p",{className:"drawing-text",children:"–í—ã—Ç—è–≥–∏–≤–∞–µ–º –≤–∞—à—É –∫–∞—Ä—Ç—É..."}),e.jsx("div",{className:"magic-particles",children:"‚ú®‚ú®‚ú®"})]})}),m&&e.jsx(I,{}),N&&e.jsx(L,{error:{response:{status:500,data:{error:{message:N}}}},onRetry:()=>v(),context:{page:"daily-reading"}}),l&&!m&&e.jsxs("div",{className:"reading-result",children:[e.jsx("div",{className:"card-display",children:e.jsx(U,{card:{...l.cards[0],name:l.cards[0].cardName,keywords:l.interpretation.keywords,imageUrl:l.interpretation.cardImageUrl},reversed:l.cards[0].reversed,showInterpretation:!1})}),e.jsxs("div",{className:"reading-details",children:[e.jsx("h2",{children:l.interpretation.summary}),e.jsx(z,{text:l.interpretation.text}),e.jsx("div",{className:"interpretation-text",children:e.jsx("p",{style:{whiteSpace:"pre-line"},children:l.interpretation.text})}),l.interpretation.keywords&&e.jsxs("div",{className:"keywords-section",children:[e.jsx("h3",{children:"–ö–ª—é—á–µ–≤—ã–µ –¢–µ–º—ã:"}),e.jsx("div",{className:"keywords-list",children:l.interpretation.keywords.map((o,p)=>e.jsx("span",{className:"keyword-badge",children:o},p))})]}),e.jsxs("div",{className:"reading-meta",children:[e.jsxs("span",{className:"meta-item",children:["üìÖ ",new Date(l.createdAt).toLocaleDateString("ru-RU")]}),e.jsxs("span",{className:"meta-item",children:["üïê ",new Date(l.createdAt).toLocaleTimeString("ru-RU")]})]}),s&&s.moonPhase&&s.dayEnergy&&e.jsxs("div",{className:"horoscope-section",children:[e.jsx("h3",{children:"üåü –ê—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ö–æ–Ω—Ç–µ–∫—Å—Ç –°–µ–≥–æ–¥–Ω—è"}),e.jsxs("div",{className:"horoscope-grid",children:[e.jsxs("div",{className:"horoscope-card moon-phase",children:[e.jsx("div",{className:"horoscope-icon",children:s.moonPhase.icon||"üåô"}),e.jsx("h4",{children:s.moonPhase.name||"–§–∞–∑–∞ –õ—É–Ω—ã"}),s.moonPhase.energy&&e.jsxs("p",{className:"horoscope-energy",children:["–≠–Ω–µ—Ä–≥–∏—è: ",s.moonPhase.energy]}),s.moonPhase.advice&&e.jsx("p",{className:"horoscope-advice",children:s.moonPhase.advice})]}),e.jsxs("div",{className:"horoscope-card day-energy",children:[e.jsx("div",{className:"horoscope-icon",children:"‚ö°"}),e.jsx("h4",{children:s.dayEnergy.day||"–î–µ–Ω—å"}),s.dayEnergy.planet&&e.jsxs("p",{className:"horoscope-planet",children:["–ü–ª–∞–Ω–µ—Ç–∞: ",s.dayEnergy.planet]}),s.dayEnergy.advice&&e.jsx("p",{className:"horoscope-advice",children:s.dayEnergy.advice})]})]}),(s.luckyNumbers||s.luckyColors||s.compatibilityToday)&&e.jsxs("div",{className:"lucky-info",children:[s.luckyNumbers&&Array.isArray(s.luckyNumbers)&&e.jsxs("div",{className:"lucky-item",children:[e.jsx("span",{className:"lucky-label",children:"üçÄ –°—á–∞—Å—Ç–ª–∏–≤—ã–µ —á–∏—Å–ª–∞:"}),e.jsx("span",{className:"lucky-values",children:s.luckyNumbers.join(", ")})]}),s.luckyColors&&Array.isArray(s.luckyColors)&&e.jsxs("div",{className:"lucky-item",children:[e.jsx("span",{className:"lucky-label",children:"üé® –°—á–∞—Å—Ç–ª–∏–≤—ã–µ —Ü–≤–µ—Ç–∞:"}),e.jsx("span",{className:"lucky-values",children:s.luckyColors.join(", ")})]}),s.compatibilityToday&&e.jsxs("div",{className:"lucky-item",children:[e.jsx("span",{className:"lucky-label",children:"üíï –ì–∞—Ä–º–æ–Ω–∏—è —Å:"}),e.jsx("span",{className:"lucky-values",children:s.compatibilityToday})]})]}),((a=(b=l.context)==null?void 0:b.horoscope)==null?void 0:a.personalizedCard)&&e.jsx("div",{className:"personalized-badge",children:"‚ú® –≠—Ç–∞ –∫–∞—Ä—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ –≤–∞—à –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞"})]}),e.jsxs("div",{className:"action-buttons-row",children:[e.jsx("button",{onClick:()=>n(`/journal?reading=${l._id}`),className:"btn-action btn-journal",children:"üìî –î–æ–±–∞–≤–∏—Ç—å –≤ –î–Ω–µ–≤–Ω–∏–∫"}),e.jsx("button",{onClick:()=>n("/history"),className:"btn-action btn-history",children:"üìñ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ò—Å—Ç–æ—Ä–∏—é"})]}),e.jsxs("div",{className:"more-spreads-section",children:[e.jsx("h4",{children:"–•–æ—Ç–∏—Ç–µ —É–≥–ª—É–±–∏—Ç—å—Å—è?"}),e.jsx("p",{children:"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞"}),e.jsxs("div",{className:"spread-suggestions",children:[e.jsx("button",{onClick:()=>n("/reading/past-present-future"),className:"btn-spread-suggest",children:"‚è≥ 3 –ö–∞—Ä—Ç—ã: –ü—Ä–æ—à–ª–æ–µ-–ù–∞—Å—Ç–æ—è—â–µ–µ-–ë—É–¥—É—â–µ–µ"}),e.jsx("button",{onClick:()=>n("/decision"),className:"btn-spread-suggest",children:"üí¨ –†–∞—Å–∫–ª–∞–¥ –Ω–∞ –í–æ–ø—Ä–æ—Å"}),e.jsx("button",{onClick:()=>n("/reading/celtic-cross"),className:"btn-spread-suggest btn-premium",children:"üîÆ –ö–µ–ª—å—Ç—Å–∫–∏–π –ö—Ä–µ—Å—Ç (10 –∫–∞—Ä—Ç)"})]})]}),e.jsx(B,{reading:l,type:"daily"}),e.jsxs("div",{className:"daily-limit-notice",children:[e.jsx("div",{className:"notice-icon-small",children:"‚ÑπÔ∏è"}),e.jsxs("div",{className:"notice-text",children:[e.jsx("strong",{children:"–û–¥–∏–Ω —Ä–∞—Å–∫–ª–∞–¥ –≤ –¥–µ–Ω—å"}),e.jsx("p",{children:"–ö–∞—Ä—Ç–∞ –î–Ω—è - —ç—Ç–æ —Å–≤—è—â–µ–Ω–Ω–∞—è —Ç—Ä–∞–¥–∏—Ü–∏—è –¢–∞—Ä–æ. –û–¥–∏–Ω —Ä–∞—Å–∫–ª–∞–¥ –≤ –¥–µ–Ω—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞—Ä—Ç–∞–º –≥–æ–≤–æ—Ä–∏—Ç—å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é. –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å –∑–∞–≤—Ç—Ä–∞ –∑–∞ –Ω–æ–≤—ã–º –ø–æ—Å–ª–∞–Ω–∏–µ–º!"})]})]})]})]})]})]})}export{ee as default};
