.spread-modal-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:fadeIn .2s ease-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.spread-modal{background:#fff;border-radius:16px;max-width:900px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:slideUp .3s ease-out}@keyframes slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:24px 32px;border-bottom:2px solid #f0f0f0}.modal-header h2{color:#667eea;margin:0;font-size:1.5rem}.btn-close{width:36px;height:36px;border:none;background:#f8f9fa;color:#666;font-size:24px;border-radius:50%;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;line-height:1}.btn-close:hover{background:#e9ecef;color:#333;transform:scale(1.1)}.modal-body{padding:32px;overflow-y:auto;flex:1}.modal-question{background:linear-gradient(135deg,#e8eaf6,#fff);padding:16px 20px;border-radius:12px;margin-bottom:16px;border-left:4px solid #667eea}.modal-question strong{color:#667eea}.modal-context{display:inline-block;background:#f8f9fa;padding:8px 16px;border-radius:8px;margin-right:12px;margin-bottom:12px;font-size:14px}.modal-context strong{color:#764ba2}.modal-date{color:#999;font-size:14px;margin-bottom:24px}.modal-summary{background:linear-gradient(135deg,#fff9e6,#fff);padding:20px;border-radius:12px;margin-bottom:24px;border-left:4px solid #ffd700}.modal-summary h3{color:#ff9800;font-size:1.1rem;margin:0 0 12px}.modal-summary p{color:#555;line-height:1.7;margin:0}.modal-cards h3{color:#333;font-size:1.1rem;margin:0 0 16px}.modal-cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;margin-bottom:24px}.modal-card{background:linear-gradient(135deg,#f8f9fa,#fff);border:2px solid #e9ecef;border-radius:12px;padding:12px;transition:all .2s}.modal-card:hover{border-color:#667eea;box-shadow:0 4px 12px #0000001a;transform:translateY(-2px)}.modal-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.card-position{background:#667eea;color:#fff;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700}.reversed-tag{background:#ff9800;color:#fff;padding:2px 6px;border-radius:4px;font-size:9px;font-weight:700}.modal-card-name{font-weight:600;color:#333;font-size:13px;margin-bottom:4px}.modal-card-position{font-size:11px;color:#999;font-style:italic}.modal-interpretation h3,.modal-positions h3{color:#333;font-size:1.1rem;margin:0 0 16px}.modal-interpretation p{color:#555;line-height:1.7}.modal-positions{display:flex;flex-direction:column;gap:16px}.modal-position-item{background:#f8f9fa;padding:16px;border-radius:12px;border-left:3px solid #667eea}.position-title{display:flex;align-items:center;gap:8px;margin-bottom:8px}.position-num{background:#667eea;color:#fff;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;flex-shrink:0}.position-title strong{color:#667eea;font-size:14px}.position-card-name{color:#333;font-weight:600;margin-bottom:8px;font-size:14px}.position-meaning{color:#555;line-height:1.6;margin:0;font-size:13px}.modal-footer{padding:20px 32px;border-top:2px solid #f0f0f0;display:flex;justify-content:flex-end}@media (max-width: 768px){.spread-modal{max-width:100%;max-height:95vh;margin:0}.modal-header,.modal-body,.modal-footer{padding:16px 20px}.modal-cards-grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}}.history-page{min-height:100vh;background:var(--bg-secondary, #f5f7fa);padding-bottom:40px;transition:background-color .3s ease}.history-content{max-width:900px;margin:40px auto;padding:0 20px}.loading{text-align:center;color:var(--text-primary, white);padding:40px;font-size:1.2rem}.empty-state{background:var(--bg-card, white);padding:60px 40px;border-radius:16px;text-align:center;box-shadow:var(--shadow-md, 0 4px 20px rgba(0, 0, 0, .1));transition:background-color .3s ease}.empty-icon{font-size:4rem;margin-bottom:20px}.empty-state h2{color:var(--color-primary, #667eea);margin-bottom:12px}.empty-state p{color:var(--text-secondary, #666);margin-bottom:24px}.filter-bar{display:flex;gap:12px;margin-bottom:24px;flex-wrap:wrap;background:var(--bg-card, white);padding:16px;border-radius:12px;box-shadow:var(--shadow, 0 2px 8px rgba(0,0,0,.05));transition:background-color .3s ease}.filter-btn{padding:8px 16px;border:2px solid var(--border-color, #e9ecef);border-radius:8px;background:var(--bg-card, white);color:var(--text-secondary, #666);font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.filter-btn:hover{border-color:var(--color-primary, #667eea);color:var(--color-primary, #667eea);background:var(--bg-secondary, #f8f9fa)}.filter-btn.active{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-color:transparent}.history-list{display:flex;flex-direction:column;gap:16px}.history-item{background:var(--bg-card, white);border-radius:12px;padding:20px;box-shadow:var(--shadow, 0 2px 10px rgba(0, 0, 0, .1));transition:transform .2s,box-shadow .2s,background-color .3s ease}.history-item:hover{transform:translateY(-2px);box-shadow:var(--shadow-md, 0 4px 15px rgba(0, 0, 0, .15))}.history-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--border-color, #f0f0f0)}.type-badge{padding:4px 12px;border-radius:12px;font-size:.85rem;font-weight:600;background:var(--bg-secondary, #f5f7fa);color:#fff}.date{color:var(--text-secondary, #666);font-size:.9rem}.history-body{margin-bottom:12px}.question-text{color:var(--text-primary, #333);margin-bottom:12px;font-size:.95rem}.question-text strong{color:var(--color-primary, #667eea)}.context-info{color:var(--text-secondary, #555);margin-bottom:8px;font-size:.9rem;padding:6px 12px;background:var(--bg-secondary, #f8f9fa);border-radius:6px;display:inline-block;margin-right:8px}.context-info strong{color:#764ba2}.cards-summary{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}.card-mini{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 12px;background:var(--bg-secondary, #f8f9ff);border-radius:8px;border:1px solid var(--border-color, #e0e0f0)}.card-name{font-weight:500;color:var(--color-primary, #667eea);font-size:.85rem}.position-mini{font-size:.75rem;color:var(--text-muted, #999)}.interpretation-preview{color:var(--text-secondary, #555);font-size:.9rem;line-height:1.5;font-style:italic;margin-bottom:8px}.spread-meta{display:flex;gap:8px;margin-top:8px}.card-count{background:#e8eaf6;color:#667eea;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:600}.history-footer{display:flex;justify-content:space-between;align-items:center;padding-top:8px;border-top:1px solid var(--border-color, #f0f0f0)}.footer-actions{display:flex;gap:8px}.btn-view{padding:6px 12px;background:#667eea;color:#fff;border:none;border-radius:6px;font-size:13px;cursor:pointer;transition:all .2s}.btn-view:hover{background:#5568d3;transform:translateY(-1px);box-shadow:0 4px 8px #667eea4d}.time{color:var(--text-muted, #999);font-size:.85rem}@media (max-width: 768px){.history-item{padding:16px}.cards-summary{flex-direction:column}}.btn-pdf-export{background:#4caf50;color:#fff;border:none;padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;transition:background .2s}.btn-pdf-export:hover{background:#45a049}.history-footer{display:flex;justify-content:space-between;align-items:center}
