.tarot-card-image{border-radius:12px;box-shadow:0 4px 12px #00000026;transition:all .3s;position:relative;overflow:hidden;background:var(--bg-card, white)}.tarot-card-image img{width:100%;height:100%;object-fit:cover;display:block}.tarot-card-image:hover{transform:translateY(-4px);box-shadow:0 8px 20px #0003}.tarot-card-image.reversed{transform:rotate(180deg)}.tarot-card-image.reversed:hover{transform:rotate(180deg) translateY(-4px)}.reversed-overlay-img{position:absolute;bottom:8px;left:50%;transform:translate(-50%) rotate(180deg);background:#ff9800;color:#fff;padding:4px 12px;border-radius:12px;font-size:11px;font-weight:700;box-shadow:0 2px 8px #ff980066}.tarot-card-image.small{width:80px;height:120px}.tarot-card-image.medium{width:120px;height:180px}.tarot-card-image.large{width:160px;height:240px}.tarot-card-placeholder{background:linear-gradient(135deg,#fff,#f8f9fa);border-radius:12px;box-shadow:0 4px 12px #0000001a;transition:all .3s;position:relative;overflow:hidden}.tarot-card-placeholder:hover{transform:translateY(-4px);box-shadow:0 8px 20px #00000026}.tarot-card-placeholder.small{width:80px;height:120px}.tarot-card-placeholder.medium{width:120px;height:180px}.tarot-card-placeholder.large{width:160px;height:240px}.card-border{border:3px solid #667eea;border-radius:10px;height:100%;padding:12px;display:flex;flex-direction:column;position:relative;background:linear-gradient(135deg,#667eea0d,#764ba20d)}.tarot-card-placeholder.reversed .card-border{border-color:#ff9800;background:linear-gradient(135deg,#ff98000d,#ffc1070d)}.card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.arcana-indicator,.suit-indicator{font-size:16px}.card-name-display{flex:1;display:flex;align-items:center;justify-content:center;text-align:center;font-weight:700;color:var(--text-primary, #333);font-size:14px;line-height:1.3;padding:8px}.card-keywords-list{display:flex;flex-direction:column;gap:4px;margin-top:auto}.kw-tag{background:#e8eaf6;color:#667eea;padding:3px 8px;border-radius:8px;font-size:10px;font-weight:600;text-align:center}.reversed-overlay{position:absolute;bottom:8px;left:50%;transform:translate(-50%);background:#ff9800;color:#fff;padding:4px 12px;border-radius:12px;font-size:10px;font-weight:700;box-shadow:0 2px 8px #ff98004d}.tarot-card-placeholder.reversed{transform:rotate(180deg)}.tarot-card-placeholder.reversed:hover{transform:rotate(180deg) translateY(-4px)}.spread-engine{background:linear-gradient(135deg,#fff,#f8f9fe,#fff);border-radius:24px;padding:48px;box-shadow:0 20px 60px #667eea26,0 0 0 1px #fffc inset;position:relative;overflow:hidden}.spread-engine:before{content:"";position:absolute;top:-50%;right:-20%;width:400px;height:400px;background:radial-gradient(circle,rgba(102,126,234,.08) 0%,transparent 70%);border-radius:50%;pointer-events:none}.spread-engine:after{content:"";position:absolute;bottom:-50%;left:-20%;width:400px;height:400px;background:radial-gradient(circle,rgba(118,75,162,.08) 0%,transparent 70%);border-radius:50%;pointer-events:none}.spread-header{text-align:center;margin-bottom:48px;padding-bottom:32px;border-bottom:2px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(90deg,transparent,#667eea,#764ba2,transparent) border-box;position:relative;z-index:1}.spread-header h2{color:#667eea;margin-bottom:16px;font-size:2.5rem;font-weight:800;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:0 2px 20px rgba(102,126,234,.2)}.spread-description{color:var(--text-secondary, #555);margin-bottom:20px;font-size:16px;line-height:1.6}.spread-meta{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}.spread-meta span{padding:10px 20px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:20px;font-size:14px;font-weight:600;border:1px solid rgba(102,126,234,.1);transition:all .3s ease;box-shadow:0 4px 12px #0000000d}.spread-meta span:hover{transform:translateY(-2px);box-shadow:0 6px 16px #667eea26}.spread-difficulty.beginner{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);color:#2e7d32;border:2px solid #81c784}.spread-difficulty.intermediate{background:linear-gradient(135deg,#fff3e0,#ffe0b2);color:#e65100;border:2px solid #ffb74d}.spread-difficulty.advanced{background:linear-gradient(135deg,#ffebee,#ffcdd2);color:#c62828;border:2px solid #e57373}.spread-layout{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin:40px 0;position:relative;z-index:1;align-items:start}.spread-svg{width:100%;height:600px;background:radial-gradient(circle at 20% 30%,rgba(102,126,234,.15) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(118,75,162,.15) 0%,transparent 50%),linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);border-radius:24px;padding:40px;box-shadow:0 20px 60px #0006,0 0 0 1px #667eea4d inset,0 0 100px #667eea33 inset;position:relative;overflow:hidden}.spread-svg:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-image:radial-gradient(2px 2px at 20% 30%,white,transparent),radial-gradient(2px 2px at 60% 70%,white,transparent),radial-gradient(1px 1px at 50% 50%,white,transparent),radial-gradient(1px 1px at 80% 10%,white,transparent),radial-gradient(2px 2px at 90% 60%,white,transparent),radial-gradient(1px 1px at 33% 85%,white,transparent),radial-gradient(1px 1px at 15% 90%,white,transparent);background-size:200% 200%;animation:stars-twinkle 4s ease-in-out infinite;opacity:.6;pointer-events:none}.spread-svg:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;height:80%;border-radius:50%;background:radial-gradient(circle at center,transparent 40%,rgba(102,126,234,.05) 40%,rgba(102,126,234,.05) 41%,transparent 41%),radial-gradient(circle at center,transparent 60%,rgba(118,75,162,.05) 60%,rgba(118,75,162,.05) 61%,transparent 61%);animation:magic-circle-pulse 8s ease-in-out infinite;pointer-events:none}@keyframes stars-twinkle{0%,to{opacity:.6;background-position:0% 0%}50%{opacity:.9;background-position:100% 100%}}@keyframes magic-circle-pulse{0%,to{transform:translate(-50%,-50%) scale(1) rotate(0);opacity:.3}50%{transform:translate(-50%,-50%) scale(1.05) rotate(180deg);opacity:.6}}.card-slot{fill:#ffffff0d;stroke:url(#cardGradient);stroke-width:.5;cursor:pointer;transition:all .3s cubic-bezier(.175,.885,.32,1.275);filter:drop-shadow(0 4px 12px rgba(102,126,234,.3)) drop-shadow(0 0 20px rgba(102,126,234,.2));rx:1.5}.card-slot.empty:hover{fill:#fff9e626;stroke-width:.8;stroke:url(#hoverGradient);filter:drop-shadow(0 0 20px rgba(255,215,0,.8)) drop-shadow(0 0 40px rgba(255,215,0,.5)) drop-shadow(0 8px 24px rgba(102,126,234,.4));animation:card-slot-glow 2s ease-in-out infinite}@keyframes card-slot-glow{0%,to{transform:scale(1) translateY(0);opacity:1}25%{transform:scale(1.03) translateY(-3px)}50%{transform:scale(1.06) translateY(-5px);opacity:.9}75%{transform:scale(1.03) translateY(-3px)}}.card-slot.drawn{fill:url(#drawnGradient);stroke:url(#successGradient);stroke-width:.6;cursor:default;animation:card-flip-reveal .8s cubic-bezier(.68,-.55,.265,1.55);filter:drop-shadow(0 6px 20px rgba(39,174,96,.5)) drop-shadow(0 0 30px rgba(39,174,96,.3)) drop-shadow(0 0 40px rgba(102,126,234,.2));rx:1.5}.card-slot.drawn:hover{filter:drop-shadow(0 8px 24px rgba(39,174,96,.6)) drop-shadow(0 0 40px rgba(39,174,96,.4)) drop-shadow(0 0 50px rgba(102,126,234,.3))}.card-slot.drawing{animation:card-draw-magic 1.2s ease-in-out}@keyframes card-draw-magic{0%{transform:scale(.5) rotate(0) translateY(50px);opacity:0;filter:drop-shadow(0 0 0 transparent) blur(10px)}15%{transform:scale(1.3) rotate(180deg) translateY(0);opacity:.5;filter:drop-shadow(0 0 40px rgba(255,215,0,1)) drop-shadow(0 0 60px rgba(255,215,0,.8)) blur(0px)}30%{transform:scale(.8) rotate(360deg) translateY(-10px);opacity:.8;filter:drop-shadow(0 0 30px rgba(102,126,234,1)) drop-shadow(0 0 50px rgba(102,126,234,.6))}50%{transform:scale(1.2) rotate(540deg) translateY(5px);opacity:.9;filter:drop-shadow(0 0 35px rgba(118,75,162,1)) drop-shadow(0 0 55px rgba(118,75,162,.7))}70%{transform:scale(.9) rotate(700deg) translateY(-5px);filter:drop-shadow(0 0 25px rgba(39,174,96,.9)) drop-shadow(0 0 45px rgba(39,174,96,.5))}85%{transform:scale(1.05) rotate(720deg) translateY(2px);opacity:1}to{transform:scale(1) rotate(720deg) translateY(0);opacity:1;filter:drop-shadow(0 6px 20px rgba(39,174,96,.5)) drop-shadow(0 0 30px rgba(39,174,96,.3)) drop-shadow(0 0 40px rgba(102,126,234,.2))}}@keyframes card-flip-reveal{0%{transform:perspective(1500px) rotateY(180deg) rotateX(15deg) scale(.5);opacity:0;filter:drop-shadow(0 0 50px rgba(255,215,0,1)) drop-shadow(0 0 80px rgba(255,215,0,.8)) brightness(1.5)}25%{transform:perspective(1500px) rotateY(135deg) rotateX(10deg) scale(.8);opacity:.4;filter:drop-shadow(0 0 40px rgba(255,215,0,.8)) drop-shadow(0 0 60px rgba(102,126,234,.6)) brightness(1.3)}50%{transform:perspective(1500px) rotateY(90deg) rotateX(5deg) scale(1.1);opacity:.7;filter:drop-shadow(0 0 35px rgba(102,126,234,.9)) drop-shadow(0 0 55px rgba(118,75,162,.7)) brightness(1.2)}75%{transform:perspective(1500px) rotateY(45deg) rotateX(2deg) scale(1.05);opacity:.9;filter:drop-shadow(0 0 30px rgba(39,174,96,.7)) drop-shadow(0 0 50px rgba(39,174,96,.5)) brightness(1.1)}to{transform:perspective(1500px) rotateY(0) rotateX(0) scale(1);opacity:1;filter:drop-shadow(0 6px 20px rgba(39,174,96,.5)) drop-shadow(0 0 30px rgba(39,174,96,.3)) drop-shadow(0 0 40px rgba(102,126,234,.2)) brightness(1)}}.position-label{fill:#fff;font-size:3.5px;font-weight:800;pointer-events:none;filter:drop-shadow(0 0 3px rgba(102,126,234,1)) drop-shadow(0 0 6px rgba(102,126,234,.8)) drop-shadow(0 2px 4px rgba(0,0,0,.5))}.positions-list{display:flex;flex-direction:column;gap:12px;max-height:none;overflow-y:visible;padding-right:12px}.positions-list::-webkit-scrollbar{width:8px}.positions-list::-webkit-scrollbar-track{background:#f0f2ff;border-radius:10px;margin:4px 0}.positions-list::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:10px;box-shadow:0 2px 8px #667eea4d}.positions-list::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#5568d3,#6a3f8e);box-shadow:0 4px 12px #667eea80}.position-item{display:flex;gap:16px;padding:14px 16px;border-radius:16px;border:2px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#e9ecef,#dee2e6) border-box;cursor:pointer;transition:all .4s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 4px 12px #00000014;position:relative;overflow:hidden;min-height:fit-content}.position-item:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(102,126,234,.1),transparent);transition:left .5s ease}.position-item:hover:before{left:100%}.position-item:hover{transform:translate(4px) scale(1.02);border:2px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#667eea,#764ba2) border-box;box-shadow:0 8px 24px #667eea40}.position-item.drawn{border:2px solid transparent;background:linear-gradient(135deg,#e8f5e9,#f1f8f4) padding-box,linear-gradient(135deg,#27ae60,#229954) border-box;cursor:default;box-shadow:0 8px 24px #27ae6033,0 0 0 1px #27ae601a inset}.position-item.drawn:hover{transform:translateY(-2px);box-shadow:0 12px 32px #27ae604d,0 0 0 1px #27ae6026 inset}.position-item.just-drawn{animation:position-card-reveal 1.5s cubic-bezier(.68,-.55,.265,1.55);border:2px solid transparent;background:linear-gradient(135deg,#fff9e6,#fffbf0) padding-box,linear-gradient(135deg,gold,#ffed4e) border-box;box-shadow:0 0 40px #ffd70099,0 8px 32px #667eea4d}@keyframes position-card-reveal{0%{transform:perspective(1000px) rotateX(-20deg) translateY(-30px) scale(.8);opacity:0;filter:blur(4px) brightness(1.5);box-shadow:0 0 60px gold,0 20px 60px #ffd700cc}30%{transform:perspective(1000px) rotateX(-10deg) translateY(-10px) scale(1.08);opacity:.8;filter:blur(1px) brightness(1.2);box-shadow:0 0 50px #ffd700cc,0 15px 50px #667eea80}60%{transform:perspective(1000px) rotateX(5deg) translateY(5px) scale(1.05);filter:blur(0) brightness(1.1);box-shadow:0 0 30px #27ae6099,0 10px 40px #27ae6066}to{transform:perspective(1000px) rotateX(0) translateY(0) scale(1);opacity:1;filter:blur(0) brightness(1);box-shadow:0 0 40px #ffd70099,0 8px 32px #667eea4d}}.position-number{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:16px;flex-shrink:0;box-shadow:0 4px 16px #667eea66,0 0 0 3px #ffffff80 inset;position:relative;transition:all .3s ease}.position-number:before{content:"";position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);opacity:0;filter:blur(8px);transition:opacity .3s ease;z-index:-1}.position-item:hover .position-number:before{opacity:.6}.position-item.drawn .position-number{background:linear-gradient(135deg,#27ae60,#229954);box-shadow:0 4px 16px #27ae6080,0 0 0 3px #fffc inset;animation:number-glow 2s ease-in-out infinite}@keyframes number-glow{0%,to{box-shadow:0 4px 16px #27ae6080,0 0 0 3px #fffc inset}50%{box-shadow:0 6px 24px #27ae60b3,0 0 20px #27ae6066,0 0 0 3px #ffffffe6 inset}}.position-info{flex:1;position:relative;z-index:1;min-width:0;word-wrap:break-word;overflow-wrap:break-word}.position-info h4{margin:0 0 6px;color:var(--text-primary, #333);font-size:14px;font-weight:700;line-height:1.3;word-wrap:break-word;overflow-wrap:break-word}.position-info p{margin:0;color:#666;font-size:13px;line-height:1.5;word-wrap:break-word;overflow-wrap:break-word;white-space:normal}.card-visual-preview{margin:10px 0;display:none;justify-content:center;filter:drop-shadow(0 4px 12px rgba(0,0,0,.15));transition:all .3s ease}.card-visual-preview:hover{filter:drop-shadow(0 8px 20px rgba(102,126,234,.3));transform:translateY(-4px)}.drawn-card-preview{margin-top:8px;padding:10px 12px;background:linear-gradient(135deg,#e8f5e9,#f1f8f4,#fff);border-radius:12px;border:2px solid transparent;background-origin:border-box;background-clip:padding-box,border-box;background-image:linear-gradient(135deg,#e8f5e9,#f1f8f4,#fff),linear-gradient(135deg,#27ae60,#229954);box-shadow:0 4px 16px #27ae6026;animation:card-preview-appear .6s cubic-bezier(.68,-.55,.265,1.55);position:relative;overflow:hidden}.drawn-card-preview:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);animation:shine 2s ease-in-out infinite}@keyframes card-preview-appear{0%{opacity:0;transform:translateY(20px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes shine{0%{left:-100%}50%,to{left:100%}}.card-preview-header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px;position:relative;z-index:1}.card-preview-header strong{color:#2e7d32;font-size:13px;font-weight:700}.reversed-badge{background:linear-gradient(135deg,#ff9800,#f57c00);color:#fff;padding:3px 10px;border-radius:12px;font-size:10px;font-weight:700;text-transform:uppercase;box-shadow:0 2px 8px #ff98004d;animation:badge-pulse 2s ease-in-out infinite}@keyframes badge-pulse{0%,to{transform:scale(1);box-shadow:0 2px 8px #ff98004d}50%{transform:scale(1.05);box-shadow:0 4px 12px #ff980080}}.card-keywords{font-size:11px;color:var(--text-secondary, #555);font-style:italic;line-height:1.5;position:relative;z-index:1}.spread-engine-loading{text-align:center;padding:80px 40px;background:linear-gradient(135deg,#fff,#f8f9fe);border-radius:24px;box-shadow:0 20px 60px #667eea26,0 0 0 1px #fffc inset;position:relative;overflow:hidden}.spread-engine-loading:before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;background:radial-gradient(circle,rgba(102,126,234,.1) 0%,transparent 70%);animation:loading-pulse 2s ease-in-out infinite}@keyframes loading-pulse{0%,to{transform:translate(-50%,-50%) scale(1);opacity:.3}50%{transform:translate(-50%,-50%) scale(1.5);opacity:.1}}.loading-spinner{font-size:64px;animation:loading-spin-glow 2s ease-in-out infinite;margin-bottom:24px;position:relative;z-index:1;filter:drop-shadow(0 4px 16px rgba(102,126,234,.4))}@keyframes loading-spin-glow{0%,to{transform:rotate(0) scale(1);filter:drop-shadow(0 4px 16px rgba(102,126,234,.4))}25%{transform:rotate(90deg) scale(1.1);filter:drop-shadow(0 6px 24px rgba(102,126,234,.6))}50%{transform:rotate(180deg) scale(1);filter:drop-shadow(0 4px 16px rgba(118,75,162,.5))}75%{transform:rotate(270deg) scale(1.1);filter:drop-shadow(0 6px 24px rgba(118,75,162,.6))}}.spread-engine-loading p{color:#667eea;font-size:18px;font-weight:600;position:relative;z-index:1;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.deck-info{margin-top:20px;font-size:14px;color:#667eea;display:flex;align-items:center;justify-content:center;gap:20px;font-weight:600}.btn-sound-toggle{background:linear-gradient(135deg,#f8f9fa,#fff);border:2px solid #e9ecef;border-radius:50%;width:44px;height:44px;font-size:20px;cursor:pointer;transition:all .3s cubic-bezier(.175,.885,.32,1.275);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #00000014;position:relative}.btn-sound-toggle:before{content:"";position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);opacity:0;filter:blur(8px);transition:opacity .3s ease;z-index:-1}.btn-sound-toggle:hover:before{opacity:.4}.btn-sound-toggle:hover{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eea;transform:scale(1.15) rotate(10deg);box-shadow:0 8px 20px #667eea4d}.spread-progress{margin:32px 0;position:relative;z-index:1}.progress-bar{width:100%;height:12px;background:linear-gradient(135deg,#e9ecef,#dee2e6);border-radius:10px;overflow:hidden;margin-bottom:12px;box-shadow:0 2px 8px #00000014 inset,0 1px 2px #fffc;position:relative}.progress-bar:before{content:"";position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(180deg,rgba(255,255,255,.3),transparent);pointer-events:none}.progress-fill{height:100%;background:linear-gradient(90deg,#667eea,#764ba2,#667eea);background-size:200% 100%;transition:width .6s cubic-bezier(.65,0,.35,1);position:relative;overflow:hidden;box-shadow:0 2px 12px #667eea66;animation:progress-gradient-shift 3s ease-in-out infinite}@keyframes progress-gradient-shift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.progress-fill:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.6) 50%,transparent 100%);animation:progress-shimmer 2s ease-in-out infinite}@keyframes progress-shimmer{0%{left:-100%}to{left:100%}}.progress-text{text-align:center;font-size:15px;color:#667eea;font-weight:700;text-shadow:0 2px 4px rgba(0,0,0,.1)}.spread-actions{display:flex;gap:20px;justify-content:center;margin-top:32px;position:relative;z-index:1}@media (max-width: 768px){.spread-engine{padding:32px 24px}.spread-header h2{font-size:2rem}.spread-layout{grid-template-columns:1fr;gap:32px}.spread-svg{height:350px}.positions-list{max-height:none;overflow-y:visible}.spread-meta{gap:12px}.spread-meta span{padding:8px 16px;font-size:13px}.position-item{padding:16px;gap:16px}.position-number{width:40px;height:40px;font-size:16px}.spread-actions{flex-direction:column;gap:12px}.spread-actions button{width:100%}}
